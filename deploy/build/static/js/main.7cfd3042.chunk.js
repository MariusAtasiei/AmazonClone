(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{18:function(e,t){t.inputs=[{name:"Image",type:"file"},{name:"Title",type:"text"},{name:"Author",type:"text"},{name:"Description",type:"text"},{name:"Category",type:"text"},{name:"Publisher",type:"text"},{name:"Year",type:"number"},{name:"Pages",type:"number"},{name:"Price",type:"number"},{name:"Amount",type:"number"}],t.orderInputs=["City","County","Address","Phone"]},35:function(e,t,a){},36:function(e,t,a){},37:function(e,t,a){},41:function(e,t,a){e.exports=a(83)},64:function(e,t,a){},7:function(e,t){t.getBooksLink=function(e,t,a){return"".concat("https://onlinelib-ecommerce-mats.herokuapp.com","/book?fields=id,title,author,price,amount&page=").concat(a||1,"&limit=8").concat(t?"&search=".concat(t):e?"&".concat(e):"")},t.filtersLink="".concat("https://onlinelib-ecommerce-mats.herokuapp.com","/book/filters"),t.bookLink=function(e){return"".concat("https://onlinelib-ecommerce-mats.herokuapp.com","/book/id=").concat(e)},t.imageSrc=function(e){var t=e._id;return"".concat("https://onlinelib-ecommerce-mats.herokuapp.com","/book/image/").concat(t)},t.cartLink=function(e){return"".concat("https://onlinelib-ecommerce-mats.herokuapp.com","/book?fields=id,title,author,price,amount&_id=").concat(Object.keys(e).join(","))}},70:function(e,t,a){},71:function(e,t,a){},74:function(e,t,a){},75:function(e,t,a){},76:function(e,t,a){},77:function(e,t,a){},78:function(e,t,a){},79:function(e,t,a){},81:function(e,t,a){},83:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(38),o=a.n(c),l=a(3),s=a(6),i=a(2),m=a.n(i),u=a(5),p=a(1),b=a(10),d=a(4),h=a.n(d);var f=function(e){var t=e.name,a=e.type,n=e.register,c=e.errors,o=e.value,l=t.toLowerCase();return r.a.createElement("div",{style:{maxWidth:["Phone","County","City","Address"].includes(t)?600:400}},r.a.createElement("label",{name:l},t),"Description"!==t?r.a.createElement("input",{type:a,name:l,ref:n({required:"".concat(t," required")}),className:"form-control",accept:"file"===a?"image/*":null,defaultValue:o||null}):r.a.createElement("textarea",{type:a,name:l,ref:n({required:"".concat(t," required")}),className:"form-control",accept:"file"===a?"image/*":null,defaultValue:o||null}),c[l]&&r.a.createElement("p",{style:{color:"red"}},c[l].message))},E=a(18);var v=function(){var e=Object(b.a)(),t=e.register,a=e.handleSubmit,c=e.errors,o=Object(n.useState)({message:"",color:""}),l=Object(p.a)(o,2),s=l[0],i=l[1],d=function(){var e=Object(u.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new FormData,Object.keys(t).forEach((function(e){var n=t[e];"image"===e?n=n[n.length-1]:["year","amount","pages","price"].includes(e)&&(n*=1);a.append(e,n)})),n={"content-type":"multipart/form-data"},e.prev=3,e.next=6,h.a.post("".concat("https://onlinelib-ecommerce-mats.herokuapp.com","/book/"),a,{headers:n});case 6:i({message:"Book succefully saved",color:"green"}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),i({message:"Book failed to save",color:"red"});case 12:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:a(d)},E.inputs.map((function(e){var a=e.name,n=e.type;return r.a.createElement(f,{register:t,errors:c,name:a,type:n})})),r.a.createElement("p",{style:{color:s.color}},s.message),r.a.createElement("input",{type:"submit",className:"btn btn-primary"})))},g=a(8),k=a(7),N=(a(64),function(e){e.preventDefault();var t=e.target.value,a=JSON.parse(localStorage.getItem("cart"));null===a?a=Object(g.a)({},t,1):void 0===a[t]?a[t]=1:a[t]+=1,localStorage.setItem("cart",JSON.stringify(a))}),O=a(23);a(70);var y=function(){var e=Object(n.useState)({price:["0-50","50-100","100-200","200-500","500-1000"]}),t=Object(p.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)({}),l=Object(p.a)(o,2),i=l[0],m=(l[1],Object(n.useState)("none")),u=Object(p.a)(m,2),b=u[0],d=u[1],f=Object(s.g)();Object(n.useEffect)((function(){h.a.get(k.filtersLink).then((function(e){var t=e.data;c(Object(O.a)(Object(O.a)({},a),t))}))}),[]);var E=function(e){var t=e.target.value.split("="),a=Object(p.a)(t,2),n=a[0],r=a[1];i[n]&&"price"!==n?i[n].includes(r)?i[n].pop(r):i[n].push(r):i[n]=[r]},v=r.a.createElement("div",{className:"filters"},r.a.createElement("button",{style:{display:b},onClick:function(){return d("none"===b?"block":"none")},className:"filters-button-cancel"},r.a.createElement("span",null,"x")),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),d("none");var t=Object.keys(i).map((function(e){return i[e].length>0?"".concat(e,"=").concat(i[e].join(",")):""})).join("&");"&"===t[0]&&(t=t.substring(1)),"&"===t[t.length-1]&&(t=t.slice(0,-1)),f.push(""!==t.split("=")[1]?"/filters/".concat(t):"/")}},Object.keys(a).map((function(e){return r.a.createElement("div",{className:"filters-group"},r.a.createElement("label",{htmlFor:e},"".concat(e[0].toUpperCase()).concat(e.slice(1))),a[e].map((function(t){return r.a.createElement("div",{className:"form-check"},r.a.createElement("input",{type:"price"===e?"radio":"checkbox",name:e,defaultValue:!!i[e]&&i[e].includes(t),value:"".concat(e,"=").concat(t),onChange:E,defaultChecked:!!i[e]&&i[e].includes(t),className:"form-check-input"}),r.a.createElement("label",{htmlFor:e,className:"form-check-label"},t))})))})),r.a.createElement("input",{type:"submit",value:"Filter",className:"btn btn-info filters-submit"})));return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"filters-button",onClick:function(){return d("none"===b?"block":"none")}},"Filters"),a.author&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"filters-parent col-3"},v),r.a.createElement("div",{className:"filters-parent-mobile col-12",style:{display:b}},v)))};a(71);var w=function(){var e=Object(n.useState)([]),t=Object(p.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(0),i=Object(p.a)(o,2),m=(i[0],i[1]),u=Object(s.i)(),b=u.search,d=u.filters,f=u.page,E=JSON.parse(localStorage.getItem("jwt")),v=E?E.user.username:null;return Object(n.useEffect)((function(){var e=Object(k.getBooksLink)(d,b,f);h.a.get(e).then((function(e){var t=e.data;return c(t)})).catch((function(e){return console.log(e.message)})),h.a.get("".concat("https://onlinelib-ecommerce-mats.herokuapp.com","/book/pages/2")).then((function(e){var t=e.data;return m(t.message)}))}),[d,b,f]),r.a.createElement("div",{className:"books"},r.a.createElement(y,null),r.a.createElement("div",{className:"books-map col-9"},a&&a.map((function(e){return r.a.createElement("div",{className:"book",style:e.amount?{}:{opacity:.5,cursor:"not-allowed"}},r.a.createElement(l.b,{to:"/book/".concat(e.title),className:"book-link"},r.a.createElement("img",{src:"".concat("https://onlinelib-ecommerce-mats.herokuapp.com","/book/image/").concat(e._id),className:"book-link-img"})),r.a.createElement("div",{className:"book-link-div"},r.a.createElement(l.b,{to:"/book/".concat(e.title),style:{color:"black"},className:"book-link"},r.a.createElement("h4",{className:"book-link-title"},e.title),r.a.createElement("h6",{className:"book-link-author"},e.author)),r.a.createElement("p",null,e.price,r.a.createElement("sup",null,"00")," lei"),"admin"===v?r.a.createElement(l.b,{to:"/admin/edit-book/".concat(e._id),className:"btn btn-primary"},"Edit Book"):r.a.createElement("button",{onClick:N,value:e._id,className:"btn btn-primary",style:{cursor:e.amount?"pointer":"not-allowed"}},"Add cart")))}))))},j=a(24),S=a.n(j);a(74);var x=function(){var e=Object(n.useState)(),t=Object(p.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)("none"),l=Object(p.a)(o,2),i=l[0],d=l[1],f=Object(n.useState)("none"),E=Object(p.a)(f,2),v=E[0],g=E[1],O=Object(n.useState)(0),y=Object(p.a)(O,2),w=y[0],j=y[1],x=Object(n.useState)(""),C=Object(p.a)(x,2),I=C[0],_=C[1],D=Object(n.useState)({color:"",message:""}),J=Object(p.a)(D,2),B=J[0],A=J[1],L=JSON.parse(localStorage.getItem("jwt")),P=L?L.user:{},F=Object(b.a)(),q=F.handleSubmit,R=F.register,U=Object(s.i)().id,T=Object(s.g)();Object(n.useEffect)((function(){h.a.get(Object(k.bookLink)(U)).then((function(e){var t=e.data;c(t),t.rating&&j(t.rating)}))}),[v]);var Y=function(){var e=Object(u.a)(m.a.mark((function e(t){var n,r,c,o,l;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.comment,r=P.username,c={username:r||"unkown",comment:n,rating:w},e.next=5,h.a.post("".concat("https://onlinelib-ecommerce-mats.herokuapp.com","/book/review/").concat(a._id),c);case 5:o=e.sent,(l=o.data).error&&console.log(l.error),g("none");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(u.a)(m.a.mark((function e(t){var n,r,c,o,l,s,i,u,p,b,d;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.wishlist,r=P.username,c={book:a._id,name:n,username:r},e.prev=3,c.name){e.next=6;break}throw new Error("Please check a wishlist");case 6:return e.next=8,h.a.post("".concat("https://onlinelib-ecommerce-mats.herokuapp.com","/wishlist/book"),c);case 8:if(o=e.sent,!(l=o.data).error){e.next=12;break}throw new Error(l.error);case 12:s=l.message,A({message:s,color:"green"}),P.wishlists?P.wishlists.includes(c.name)||(P.wishlists.push(c.name),p=JSON.parse(localStorage.getItem("jwt")),b=p.token,localStorage.setItem("jwt",JSON.stringify({token:b,user:P}))):(P.wishlists=[c.name],i=JSON.parse(localStorage.getItem("jwt")),u=i.token,localStorage.setItem("jwt",JSON.stringify({token:u,user:P}))),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(3),d=e.t0.message,A({message:d,color:"red"});case 21:case"end":return e.stop()}}),e,null,[[3,17]])})));return function(t){return e.apply(this,arguments)}}();return a?r.a.createElement("div",{className:"book-parent"},r.a.createElement("div",{className:"book-presentation"},r.a.createElement("div",{className:"col-lg-5"},r.a.createElement("img",{src:Object(k.imageSrc)(a),className:"book-presentation-image"})),r.a.createElement("div",{className:"book-presentation-info col-lg-7"},r.a.createElement("div",{style:{width:195,display:"flex",alignItems:"center"}},r.a.createElement("div",{onClick:function(){return g("block")},style:{width:108}},r.a.createElement(S.a,{count:5,onChange:function(e){return j(e)},size:24,activeColor:"#ffd700",classNames:"book-presentation-rating"})),r.a.createElement("a",{href:"#review",style:{color:"gray"}},"(",a.reviews.length," review",1!==a.reviews.length&&"s ",")")),r.a.createElement("h5",{className:"book-presentation-info-title"},a.title),r.a.createElement("h6",{className:"book-presentation-info-author"},a.author),r.a.createElement("h4",{className:"book-presentation-info-price"},a.price,r.a.createElement("sup",null,"00")," lei"),r.a.createElement("div",{className:"book-presentation-buttons"},r.a.createElement("button",{onClick:N,value:a._id,className:"btn btn-primary book-presentation-buttons-add-cart"},"Add to Cart"),r.a.createElement("button",{onClick:function(e){e.preventDefault(),P.username||T.push("/signin"),d("block")},value:a._id,className:"btn btn-primary book-presentation-buttons-add-wishlist"},"Add to wishlist")))),r.a.createElement("div",{className:"book-description"},r.a.createElement("h4",{className:"book-description-title"},"Description"),r.a.createElement("p",{className:"book-description-text"},a.description)),r.a.createElement("div",{className:"book-details"},r.a.createElement("h4",{className:"book-details-title"},"Details"),r.a.createElement("table",{className:"table table-striped"},r.a.createElement("tbody",null,["title","author","category","pages","publisher","year"].map((function(e){return r.a.createElement("tr",{className:"book-details-spec"},r.a.createElement("th",{className:"book-details-spec-item"},e[0].toUpperCase()+e.slice(1,e.length)),r.a.createElement("td",{className:"book-details-spec-info"},a[e]))}))))),r.a.createElement("div",{className:"book-reviews",id:"review"},r.a.createElement("h4",{className:"book-reviews-title"},"Reviews"),a.reviews>0?a.reviews.map((function(e){return r.a.createElement("div",null,r.a.createElement("h4",null,e.username),r.a.createElement(S.a,{count:5,value:e.rating,size:24,classNames:"book-presentation-rating"}),r.a.createElement("p",null,e.comment))})):r.a.createElement("h5",null,"No reviews to this book")),r.a.createElement("div",{className:"book-wishlist",style:{display:v}},r.a.createElement("div",{className:"book-wishlist-top"},r.a.createElement("h2",null,"Write a review for your rating"),r.a.createElement("button",{onClick:function(e){e.preventDefault(),g("none")},className:"book-wishlist-top-button"},r.a.createElement("span",null,"X"))),r.a.createElement("form",{onSubmit:q(Y)},r.a.createElement("textarea",{name:"comment",ref:R,className:"form-control"}),r.a.createElement("button",{className:"btn btn-primary",style:{marginTop:20}},"Submit"))),r.a.createElement("div",{style:{display:i},className:"book-wishlist"},r.a.createElement("div",{className:"book-wishlist-top"},r.a.createElement("h2",null,"Add to wishlist"),r.a.createElement("button",{onClick:function(e){e.preventDefault(),d("none")},className:"book-wishlist-top-button"},r.a.createElement("span",null,"X"))),r.a.createElement("form",{onSubmit:q(M),className:"book-wishlist-form"},P.wishlists&&P.wishlists.map((function(e){return r.a.createElement("div",null,r.a.createElement("input",{type:"radio",value:e,name:"wishlist",id:e,ref:R}),r.a.createElement("label",{htmlFor:e,className:"book-wishlist-form-label"},e))})),r.a.createElement("input",{type:"radio",name:"wishlist",id:"write",value:I,ref:R}),r.a.createElement("label",{for:"write",className:"book-wishlist-form-label"},r.a.createElement("input",{type:"text",onChange:function(e){var t=e.target.value;return _(t)},className:"book-wishlist-form-input"})),r.a.createElement("p",{style:{color:B.color}},B.message),r.a.createElement("button",{className:"btn btn-primary book-wishlist-form-button"},"Submit")))):r.a.createElement("div",null)};var C=function(e){var t=e.register,a=e.errors,n=e.value,c=r.a.useState(),o=Object(p.a)(c,2),l=o[0],s=o[1],i=l||(n?"".concat("https://onlinelib-ecommerce-mats.herokuapp.com","/book/image/").concat(n):null);return r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{name:"image"},"Image"),r.a.createElement("input",{type:"file",name:"image",ref:t({required:!n&&"Image required"}),className:"form-control-file",accept:"image/*",onChange:function(e){var t=e.target;if(t.files){var a=t.files,n=a[a.length-1];n&&s(URL.createObjectURL(n))}}}),r.a.createElement("img",{src:i,style:{height:100,display:l||n?"block":"none"}}),a.image&&r.a.createElement("p",{style:{color:"red"}},a.image.message))};var I=function(){var e=Object(b.a)(),t=e.register,a=e.handleSubmit,c=e.errors,o=Object(s.g)(),l=Object(n.useState)(),i=Object(p.a)(l,2),d=i[0],v=i[1],g=Object(n.useState)({message:"",color:""}),N=Object(p.a)(g,2),O=N[0],y=N[1],w=Object(s.i)().id;Object(n.useEffect)((function(){h.a.get(Object(k.bookLink)(w)).then((function(e){var t=e.data;return v(t)})).catch((function(e){return console.log(e)}))}),[]);var j=function(){var e=Object(u.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new FormData,Object.keys(t).forEach((function(e){var n=t[e];a.append(e,"image"===e?n.length?n[n.length-1]:d.image:n)})),a.append("_id",w),n={"content-type":"multipart/form-data"},e.prev=4,e.next=7,h.a.put("".concat("https://onlinelib-ecommerce-mats.herokuapp.com","/book/"),a,{headers:n});case 7:y({message:"Book updated succefully",color:"green"}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),y({message:"Book failed to update",color:"red"});case 13:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(u.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.delete("".concat("https://onlinelib-ecommerce-mats.herokuapp.com","/book/id=").concat(d._id));case 3:o.push("/"),alert("Book deleted successfully"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),y({message:"Book could not be deleted",color:"red"});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return d?r.a.createElement("div",null,r.a.createElement("form",{onSubmit:a(j),style:{columnCount:2}},r.a.createElement(C,{register:t,errors:c,value:d._id}),E.inputs.slice(1).map((function(e){var a=e.name,n=e.type;return r.a.createElement(f,{register:t,errors:c,name:a,type:n,value:d[a.toLowerCase()]})})),r.a.createElement("p",{style:{color:O.color}},O.message),r.a.createElement("input",{type:"submit",className:"btn btn-primary",style:{display:"inline-block"}}),r.a.createElement("button",{onClick:S,className:"btn btn-danger",style:{display:"inline-block"}},"Delete Book"))):r.a.createElement("div",null)};a(75);var _=function(){var e=Object(n.useState)(JSON.parse(localStorage.getItem("cart"))),t=Object(p.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(),i=Object(p.a)(o,2),m=i[0],u=i[1],b=Object(n.useState)(""),d=Object(p.a)(b,2),f=d[0],E=d[1],v=Object(s.g)();Object(n.useEffect)((function(){a&&h.a.get(Object(k.cartLink)(a)).then((function(e){var t=e.data;t.forEach((function(e){e.requestedAmount=a[e._id]})),u(t)}))}),[a]);var g=function(e){var t=e.target.value,a=JSON.parse(localStorage.getItem("cart"));delete a[t],0===Object.keys(a).length?(localStorage.removeItem("cart"),c(null)):(localStorage.setItem("cart",JSON.stringify(a)),c(a))};return a?m?r.a.createElement(r.a.Fragment,null,r.a.createElement("table",{className:"table table-bordered"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"Book"),r.a.createElement("th",{scope:"col"},"Amount"),r.a.createElement("th",{scope:"col"},"Price"))),r.a.createElement("tbody",null,m.map((function(e){return r.a.createElement("tr",{className:"table-row"},r.a.createElement("td",{className:"table-row-book"},r.a.createElement("div",{className:"table-row-book-div"},r.a.createElement(l.b,{className:"table-row-book-link",to:"/book/".concat(e.title)},r.a.createElement("div",{className:"table-row-book-image-div"},r.a.createElement("img",{src:Object(k.imageSrc)(e),className:"table-row-book-image"}))),r.a.createElement("div",{className:"table-row-book-pres"},r.a.createElement(l.b,{className:"table-row-book-link",to:"/book/".concat(e.title)},r.a.createElement("p",{className:"table-row-book-title"},function(e){var t=e.title.substring(0,70).split(" ");t.pop();var a=(t=t.join(" "))[t.length-1];return[",",".",":"].includes(a)&&(t=t.slice(0,-1)),t}(e))),r.a.createElement("button",{onClick:g,value:e._id,className:"btn btn-danger book-cart-info-delete table-row-book-button"},"Delete")))),r.a.createElement("td",null,r.a.createElement("div",{className:"table-info"},r.a.createElement("select",{defaultValue:e.requestedAmount,onChange:function(t){var a=t.target,n=JSON.parse(localStorage.getItem("cart"));n[e._id]=1*a.value,localStorage.setItem("cart",JSON.stringify(n)),e.requestedAmount=1*a.value,c(JSON.parse(localStorage.getItem("cart")))},className:"form-control book-cart-info-select"},function(e){for(var t=[1],a=2;a<e;++a)t.push(a);return t}(e.amount).map((function(e){return r.a.createElement("option",null,e)}))))),r.a.createElement("td",null,r.a.createElement("p",{className:"table-info"},(t=e).requestedAmount*t.price,r.a.createElement("sup",null,"00")," RON")));var t})))),r.a.createElement("div",{className:"cart-footer"},r.a.createElement("p",{className:"cart-footer-total"},"Total price: ",function(e){var t=0;return e.forEach((function(e){var a=e.requestedAmount,n=e.price;return t+=a*n})),t}(m),r.a.createElement("sup",null,"00")," RON"),r.a.createElement("button",{class:"btn btn-primary",onClick:function(){h.a.post("".concat("https://onlinelib-ecommerce-mats.herokuapp.com","/book/checkout"),a).then((function(e){if(!e.data)throw new Error("Out of stock");v.push("/checkout")})).catch((function(e){var t=e.message;return E(t)}))}},"Checkout")),r.a.createElement("p",{className:"cart-footer-error"},f)):r.a.createElement("div",null):r.a.createElement("div",null,"Cart is empty")};a(35);var D=function(){var e=Object(b.a)(),t=e.register,a=e.handleSubmit,c=e.errors,o=Object(n.useState)({text:null,color:"green"}),i=Object(p.a)(o,2),d=i[0],E=i[1],v=Object(s.g)(),g=function(){var e=Object(u.a)(m.a.mark((function e(t){var a,n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.post("".concat("https://onlinelib-ecommerce-mats.herokuapp.com","/auth/signin"),t);case 3:if(a=e.sent,!(n=a.data).error){e.next=7;break}throw new Error(n.error);case 7:localStorage.setItem("jwt",JSON.stringify(n)),v.push("/"),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),r=e.t0.message,E({text:r,color:"red"});case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"container"},r.a.createElement("h2",{className:"mt-5 mb-5"},"Signin"),r.a.createElement("form",{onSubmit:a(g)},r.a.createElement(f,{type:"text",name:"Username",register:t,errors:c}),r.a.createElement(f,{type:"password",name:"Password",register:t,errors:c}),r.a.createElement("p",{style:{color:d.color}},d.text),r.a.createElement("div",null,r.a.createElement("button",{className:"btn btn-raised btn-primary"},"Sign in"),r.a.createElement(l.b,{className:"btn btn-raised btn-primary",to:"/signup"},"Sign up"))))};var J=function(){var e=Object(b.a)(),t=e.register,a=e.handleSubmit,c=e.errors,o=Object(n.useState)({text:null,color:"green"}),i=Object(p.a)(o,2),d=i[0],E=i[1],v=Object(s.g)(),g=function(){var e=Object(u.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.post("".concat("https://onlinelib-ecommerce-mats.herokuapp.com","/auth/signup"),t);case 3:if(a=e.sent,!(n=a.data).error){e.next=7;break}throw new Error(n.error);case 7:v.push("/"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),E({text:e.t0.message,color:"red"});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"container"},r.a.createElement("h2",{className:"mt-5 mb-5"},"Signup"),r.a.createElement("form",{onSubmit:a(g)},r.a.createElement(f,{type:"email",name:"Email",register:t,errors:c}),r.a.createElement(f,{type:"text",name:"Username",register:t,errors:c}),r.a.createElement(f,{type:"password",name:"Password",register:t,errors:c}),r.a.createElement("p",{style:{color:d.color}},d.text),r.a.createElement("button",{className:"btn btn-raised btn-primary"},"Sign up"),r.a.createElement(l.b,{className:"btn btn-raised btn-primary",to:"/signin"},"Sign in")))};var B=function(){var e=Object(n.useState)(),t=Object(p.a)(e,2),a=t[0],c=t[1],o=Object(s.i)().key;return Object(n.useEffect)((function(){h.a.get("".concat("https://onlinelib-ecommerce-mats.herokuapp.com","/auth/confirmation/").concat(o)).then((function(e){var t=e.data;return c(t)}))}),[]),r.a.createElement("div",{style:{margin:"200px auto",width:400}},r.a.createElement("h1",{className:"text-center"},a),r.a.createElement(l.b,{to:"/signin",className:"btn btn-primary",style:{display:"flex",alignItems:"center",justifyContent:"center"}},"Go to sign in"))};a(76);var A=function(){var e=Object(s.g)(),t=JSON.parse(localStorage.getItem("jwt")),a=t.user,c=t.user.wishlists,o=Object(n.useState)(),i=Object(p.a)(o,2),m=i[0],u=i[1],b=Object(n.useState)(a.wishlists[0]),d=Object(p.a)(b,2),f=d[0],E=d[1];return Object(n.useEffect)((function(){a||e.push("/signin"),h.a.get("".concat("https://onlinelib-ecommerce-mats.herokuapp.com","/wishlist/one/").concat(f)).then((function(e){var t=e.data.wishlist.books;h.a.get(Object(k.getBooksLink)("_id=".concat(t.join(",")))).then((function(e){var t=e.data;return u(t)}))})).catch((function(e){var t=e.message;return console.log(t)}))}),[f]),0===c.length?r.a.createElement("div",null,"No wishlists"):r.a.createElement("div",{className:"wishlist-list"},r.a.createElement("select",{className:"form-control",onChange:function(e){var t=e.target.value;return E(t)}},c.map((function(e){return r.a.createElement("option",null,e)}))),m&&r.a.createElement("div",{className:"wishlist-books-map"},m.map((function(e){return r.a.createElement("div",{className:"wishlist-book",style:e.amount?{}:{opacity:.5,cursor:"not-allowed"}},r.a.createElement(l.b,{to:"/book/".concat(e.title),className:"wishlist-book-link"},r.a.createElement("div",{className:"wishlist-book-link-img-div"},r.a.createElement("img",{src:"".concat("https://onlinelib-ecommerce-mats.herokuapp.com","/book/image/").concat(e._id),className:"wishlist-book-link-img"}))),r.a.createElement("div",{className:"wishlist-book-link-div"},r.a.createElement(l.b,{to:"/book/".concat(e.title),style:{color:"black"},className:"wishlist-book-link"},r.a.createElement("h4",{className:"wishlist-book-link-title"},e.title),r.a.createElement("h6",{className:"wishlist-book-link-author"},e.author)),r.a.createElement("p",{className:"wishlist-book-link-price"},e.price,r.a.createElement("sup",null,"00")," lei"),r.a.createElement("button",{onClick:k.addToCart,value:e._id,className:"btn btn-primary",style:{cursor:e.amount?"pointer":"not-allowed"}},"Add cart")))}))))};a(77);var L=function(){var e=Object(n.useState)(""),t=Object(p.a)(e,2),a=t[0],c=t[1],o=Object(b.a)(),l=o.register,s=o.handleSubmit,i=o.errors,d=function(){var e=Object(u.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=0,e.next=3,h.a.get(Object(k.cartLink)(t));case 3:return n=e.sent,n.data.forEach((function(e){var n=e.price,r=e._id;return a+=t[r]*n})),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(u.a)(m.a.mark((function e(t){var a,n,r,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a=JSON.parse(localStorage.getItem("cart"))){e.next=4;break}throw new Error("Cart is empty");case 4:return t.cart=a,n=localStorage.getItem("jwt"),t.orderedBy=n?JSON.parse(n).user.username:"unknown",e.next=9,d(a);case 9:t.price=e.sent,r="".concat("https://onlinelib-ecommerce-mats.herokuapp.com","/book/order"),h.a.post(r,t).then((function(e){var t=e.data;t.error&&c({color:"red",message:t.error}),c({color:"green",message:t.message}),localStorage.removeItem("cart")})),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),o=e.t0.message,c({color:"red",message:o});case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"checkout"},r.a.createElement("form",{className:"checkout-form",onSubmit:s(v)},r.a.createElement("h4",{className:"checkout-title"},"Checkout"),E.orderInputs.map((function(e){return r.a.createElement(f,{errors:i,register:l,type:"text",name:e})})),r.a.createElement("p",{style:{color:a.color}},a.message),r.a.createElement("button",{className:"btn btn-primary checkout-form-button"},"Order")))};a(78);var P=function(){var e=Object(s.g)(),t=Object(n.useState)(),a=Object(p.a)(t,2),c=a[0],o=a[1],i=JSON.parse(localStorage.getItem("jwt"));i||e.push("/signin");var m=i.user;return Object(n.useEffect)((function(){h.a.get("".concat("https://onlinelib-ecommerce-mats.herokuapp.com","/book/order?user=").concat(m.username)).then((function(e){var t=e.data;return o(t.orders)})).catch((function(e){var t=e.message;return console.log(t)}))}),[]),c?r.a.createElement("div",null,c.map((function(e){var t=e._id,a=e.price,n=e.status,c=e.numOfBooks;return r.a.createElement(l.b,{to:"/user/order/".concat(t),className:"order-list-link"},r.a.createElement("div",{className:"order-list-item1"},r.a.createElement("h3",null,t),r.a.createElement("p",null,"Number of books: ",c)),r.a.createElement("div",{className:"order-list-item2"},r.a.createElement("p",null,"Total: ",a,r.a.createElement("sup",null,"00")," RON"),r.a.createElement("p",{style:{color:"Processing"===n?"#c96800":"Cancelled"===n?"#363636":"green"}},"Status: ",n)))}))):r.a.createElement("div",null)},F=(a(79),a(40));var q=function(){var e=Object(s.i)().id,t=Object(n.useState)(),a=Object(p.a)(t,2),c=a[0],o=a[1],i=Object(n.useState)(),b=Object(p.a)(i,2),d=b[0],f=b[1],E=Object(n.useState)({text:"",message:""}),v=Object(p.a)(E,2),g=v[0],N=v[1];Object(n.useEffect)((function(){h.a.get("".concat("https://onlinelib-ecommerce-mats.herokuapp.com","/book/order/id=").concat(e)).then((function(e){var t=e.data.order;o(t),h.a.get("".concat("https://onlinelib-ecommerce-mats.herokuapp.com","/book?fields=id,title,author,price&page&_id=").concat(Object.keys(t.cart))).then((function(e){var t=e.data;return f(t)})).catch((function(e){var t=e.message;return console.log(t)}))})).catch((function(e){var t=e.message;return console.log(t)}))}),[]);var O=function(){var e=Object(u.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=c._id,e.prev=2,e.next=5,h.a.put("".concat("https://onlinelib-ecommerce-mats.herokuapp.com","/book/order"),{_id:a,status:"Cancelled"});case 5:N({text:"Order cancelled",color:"green"}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),N({text:"We can't solve it right now, please try again later",color:"red"});case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}();if(!c)return r.a.createElement("div",null);var y=c.cart;return r.a.createElement("div",{className:"order"},r.a.createElement("div",null,r.a.createElement("h4",null,c._id)),r.a.createElement("div",null,r.a.createElement("h5",null,"Address"),r.a.createElement("p",null,"County: ",c.county),r.a.createElement("p",null,"City: ",c.city),r.a.createElement("p",null,"Street: ",c.address," "),r.a.createElement("p",null,"Price: ",c.price,r.a.createElement("sup",null,"00")," RON"),r.a.createElement("p",null,"Date: ",F(c.createdAt).format("YYYY-MM-DD")),r.a.createElement("p",null,"Status: ",c.status)),r.a.createElement("div",{className:"order-books"},r.a.createElement("h4",{className:"order-books-title"},"Books(",c.numOfBooks,")"),r.a.createElement("div",{className:"order-books-map"},d&&d.map((function(e){return r.a.createElement("div",{className:"order-books-item"},r.a.createElement("h3",{className:"order-books-item-multiple"},y[e._id]," X"),r.a.createElement(l.b,{to:"/book/".concat(e.title)},r.a.createElement("img",{src:Object(k.imageSrc)(e),style:{height:100}})))})))),r.a.createElement("div",{className:"order-cancel"},r.a.createElement("button",{className:"btn btn-raised btn-primary ",onClick:O,value:c._id},"Cancel order"),r.a.createElement("p",{style:{color:g.color,marginTop:10}},g.text)))};a(81);var R=function(){var e=Object(s.g)(),t=localStorage.getItem("jwt"),a=Object(n.useState)(),c=Object(p.a)(a,2),o=c[0],i=c[1],b=Object(n.useState)(""),d=Object(p.a)(b,2),f=d[0],E=d[1];t&&"admin"===JSON.parse(t).user.username||e.push("/"),Object(n.useEffect)((function(){h.a.get("".concat("https://onlinelib-ecommerce-mats.herokuapp.com","/book/order?status=").concat(f)).then((function(e){var t=e.data;return i(t.orders)}))}),[f]);var v=function(){var e=Object(u.a)(m.a.mark((function e(t){var a,n,r,c,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.target,n=a.value.split("-"),r=Object(p.a)(n,2),c=r[0],o=r[1],e.prev=2,e.next=5,h.a.put("".concat("https://onlinelib-ecommerce-mats.herokuapp.com","/book/order"),{status:c,_id:o});case 5:alert("Order successfully updated"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),alert("Order couldn't be updated");case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}();return o?r.a.createElement("div",null,r.a.createElement("h1",null,"Dashboard"),r.a.createElement("div",null,r.a.createElement("label",null,"Status: "),r.a.createElement("select",{onChange:function(e){var t=e.target;return E(t.value)}},r.a.createElement("option",{value:""},"All"),r.a.createElement("option",{value:"Processing"},"Processing"),r.a.createElement("option",{value:"Delivered"},"Delivered"),r.a.createElement("option",{value:"Cancelled"},"Cancelled")),r.a.createElement("div",null,r.a.createElement("table",{class:"table table-striped"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"order-column-id",scope:"col"},"#"),r.a.createElement("th",{scope:"col"},"Username"),r.a.createElement("th",{scope:"col"},"Books"),r.a.createElement("th",{scope:"col"},"Price"),r.a.createElement("th",{scope:"col"},"County"),r.a.createElement("th",{scope:"col"},"City"),r.a.createElement("th",{scope:"col"},"Address"),r.a.createElement("th",{scope:"col"},"Buttons"))),r.a.createElement("tbody",null,o.map((function(e){return r.a.createElement("tr",null,r.a.createElement(l.b,{to:"/user/order/".concat(e._id),className:"order-link"},r.a.createElement("th",{className:"order-column-id",scope:"row"},e._id)),r.a.createElement("td",null,e.orderedBy),r.a.createElement("td",null,e.numOfBooks),r.a.createElement("td",null,e.price),r.a.createElement("td",null,e.county),r.a.createElement("td",null,e.city),r.a.createElement("td",null,e.address),r.a.createElement("td",null,r.a.createElement("button",{className:"order-buttons order-buttons-delivered",value:"Delivered-".concat(e._id),onClick:v},"\u2713"),r.a.createElement("button",{className:"order-buttons order-buttons-cancel",value:"Cancelled-".concat(e._id),onClick:v},"x")))}))))))):r.a.createElement("div",null)};a(36);var U=["/filters/"],T=function(){var e=Object(s.h)().pathname;return r.a.createElement("div",{className:"app-main"},U.includes(e)&&r.a.createElement(s.a,{to:"/"}),r.a.createElement(s.d,null,r.a.createElement(s.b,{exact:!0,path:"/",component:w}),r.a.createElement(s.b,{path:"/page=:page",component:w}),r.a.createElement(s.b,{path:"/search=:search",component:w}),r.a.createElement(s.b,{path:"/filters/:filters",component:w}),r.a.createElement(s.b,{path:"/filters",component:w}),r.a.createElement(s.b,{path:"/signin",component:D}),r.a.createElement(s.b,{path:"/signup",component:J}),r.a.createElement(s.b,{path:"/book/:id",component:x}),r.a.createElement(s.b,{path:"/admin/create-book",component:v}),r.a.createElement(s.b,{path:"/admin/edit-book/:id",component:I}),r.a.createElement(s.b,{path:"/cart",component:_}),r.a.createElement(s.b,{path:"/confirmation/:key",component:B}),r.a.createElement(s.b,{path:"/user/wishlist",component:A}),r.a.createElement(s.b,{path:"/user/history",component:P}),r.a.createElement(s.b,{path:"/user/order/:id",component:q}),r.a.createElement(s.b,{path:"/checkout",component:L}),r.a.createElement(s.b,{path:"/admin/dashboard",component:R})))};a(37);var Y=function(){var e=Object(s.g)(),t=Object(s.h)().pathname,a=null!==localStorage.getItem("jwt");return r.a.createElement("div",{className:"dropdown show "},r.a.createElement("a",{className:"navbar-icons-link",role:"button",href:"#",id:"dropdownMenuLink","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},r.a.createElement("i",{className:"fa fa-user navbar-icons-link-icon","aria-hidden":"true"})),r.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"dropdownMenuLink"},a?r.a.createElement(r.a.Fragment,null,r.a.createElement(l.b,{className:"dropdown-item",to:"/user/wishlist"},"Wishlist"),r.a.createElement(l.b,{className:"dropdown-item",to:"/user/history"},"History"),r.a.createElement(l.b,{className:"dropdown-item",onClick:function(){localStorage.removeItem("jwt"),"/"===t?e.go():e.push("/")}},"Sign out")):r.a.createElement(r.a.Fragment,null,r.a.createElement(l.b,{className:"dropdown-item",to:"/signin"},"Sign in"),r.a.createElement(l.b,{className:"dropdown-item",to:"/signup"},"Sign up"))))};var M=function(){var e=Object(b.a)(),t=e.register,a=e.handleSubmit,n=Object(s.g)();return r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark"},r.a.createElement(l.b,{style:{color:"white",textDecoration:"none",marginRight:10},to:"/",className:"navbar-logo"},r.a.createElement("img",{src:"".concat("","/images.png"),className:"navbar-logo-img"}),r.a.createElement("p",{className:"navbar-logo-text"},"OnlineLibrary")),r.a.createElement("div",{className:"navbar-search"},r.a.createElement("form",{className:"navbar-search-form",onSubmit:a((function(e){var t=e.search;t?n.push("/search=".concat(t)):n.push("/")}))},r.a.createElement("input",{type:"text",placeholder:"Search..",name:"search",className:"navbar-search-form-input",ref:t}),r.a.createElement("button",{type:"submit",className:"navbar-search-form-button"},r.a.createElement("i",{className:"fa fa-search"})))),r.a.createElement("div",{className:"navbar-icons"},r.a.createElement(Y,null),r.a.createElement(l.b,{to:"/cart",className:"navbar-icons-link"},r.a.createElement("i",{className:"fa fa-shopping-cart navbar-icons-link-icon"}))))};var V=function(){return r.a.createElement("div",{className:"app"},r.a.createElement(l.a,null,r.a.createElement(M,null),r.a.createElement(T,null)))};a(82);o.a.render(r.a.createElement(V,null),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.7cfd3042.chunk.js.map